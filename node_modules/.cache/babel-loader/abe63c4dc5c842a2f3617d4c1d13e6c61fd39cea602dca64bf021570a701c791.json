{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{Container,LoginContainer,FormContainer,FormToggle,TerminalLine,TerminalPrompt,TerminalText,Cursor}from'./styles';// Importação centralizada dos componentes\nimport{Logo,Input,PasswordInput,Button}from'../../components';// Importação dos contextos\nimport{useAuth}from'../../contexts/AuthContext';import{useToast}from'../../contexts/ToastContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Auth=()=>{const navigate=useNavigate();const{signIn,signUp}=useAuth();const{showToast}=useToast();const[isLogin,setIsLogin]=useState(true);const[loading,setLoading]=useState(false);// Login form state\nconst[loginEmail,setLoginEmail]=useState('');const[loginPassword,setLoginPassword]=useState('');// Signup form state\nconst[username,setUsername]=useState('');const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[confirmPassword,setConfirmPassword]=useState('');const[adminPassword,setAdminPassword]=useState('');// Errors\nconst[passwordError,setPasswordError]=useState('');const validatePassword=()=>{if(password.length>0&&password.length<6){setPasswordError('A senha deve ter pelo menos 6 caracteres');return false;}else{setPasswordError('');return true;}};const handleLogin=async e=>{e.preventDefault();setLoading(true);try{const{error}=await signIn(loginEmail,loginPassword);if(error){showToast(error.message||'Erro ao fazer login','error');}else{showToast('Login realizado com sucesso!');setTimeout(()=>{navigate('/dashboard');},1000);}}catch(error){showToast('Erro ao conectar com o servidor','error');}finally{setLoading(false);}};const handleSignup=async e=>{e.preventDefault();if(!validatePassword())return;if(password!==confirmPassword){showToast('As senhas não coincidem!','error');return;}setLoading(true);try{const{error}=await signUp(email,password,username,adminPassword);if(error){showToast(error.message||'Erro ao criar conta','error');}else{showToast('Conta criada com sucesso!');setIsLogin(true);// Reset form\nsetUsername('');setEmail('');setPassword('');setConfirmPassword('');setAdminPassword('');}}catch(error){showToast('Erro ao conectar com o servidor','error');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(LoginContainer,{children:[/*#__PURE__*/_jsx(Logo,{}),/*#__PURE__*/_jsxs(TerminalLine,{children:[/*#__PURE__*/_jsx(TerminalPrompt,{children:\"root@valeterm:~$\"}),/*#__PURE__*/_jsx(TerminalText,{children:isLogin?'iniciar_sessao':'novo_usuario'}),/*#__PURE__*/_jsx(Cursor,{})]}),/*#__PURE__*/_jsxs(FormToggle,{children:[/*#__PURE__*/_jsx(\"button\",{className:isLogin?'active':'',onClick:()=>setIsLogin(true),children:\"Login\"}),/*#__PURE__*/_jsx(\"button\",{className:!isLogin?'active':'',onClick:()=>setIsLogin(false),children:\"Cadastro\"})]}),isLogin?/*#__PURE__*/_jsxs(FormContainer,{onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(Input,{id:\"login-email\",label:\"Email\",type:\"email\",value:loginEmail,onChange:e=>setLoginEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(PasswordInput,{id:\"login-password\",label:\"Senha\",value:loginPassword,onChange:e=>setLoginPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,isLoading:loading,children:\"Entrar\"})]}):/*#__PURE__*/_jsxs(FormContainer,{onSubmit:handleSignup,children:[/*#__PURE__*/_jsx(Input,{id:\"username\",label:\"Nome de Usu\\xE1rio\",type:\"text\",value:username,onChange:e=>setUsername(e.target.value),required:true}),/*#__PURE__*/_jsx(Input,{id:\"email\",label:\"Email\",type:\"email\",value:email,onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/_jsx(PasswordInput,{id:\"password\",label:\"Senha\",value:password,onChange:e=>setPassword(e.target.value),onBlur:()=>validatePassword(),error:passwordError,required:true,minLength:6}),/*#__PURE__*/_jsx(PasswordInput,{id:\"confirm-password\",label:\"Confirmar Senha\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(PasswordInput,{id:\"admin-password\",label:\"Senha de Autoriza\\xE7\\xE3o\",value:adminPassword,onChange:e=>setAdminPassword(e.target.value),required:true}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,isLoading:loading,children:\"Cadastrar\"})]})]})});};export default Auth;","map":{"version":3,"names":["React","useState","useNavigate","Container","LoginContainer","FormContainer","FormToggle","TerminalLine","TerminalPrompt","TerminalText","Cursor","Logo","Input","PasswordInput","Button","useAuth","useToast","jsx","_jsx","jsxs","_jsxs","Auth","navigate","signIn","signUp","showToast","isLogin","setIsLogin","loading","setLoading","loginEmail","setLoginEmail","loginPassword","setLoginPassword","username","setUsername","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","adminPassword","setAdminPassword","passwordError","setPasswordError","validatePassword","length","handleLogin","e","preventDefault","error","message","setTimeout","handleSignup","children","className","onClick","onSubmit","id","label","type","value","onChange","target","required","fullWidth","isLoading","onBlur","minLength"],"sources":["/root/m-software/drive-react/src/pages/Auth/index.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { \n  Container, \n  LoginContainer, \n  FormContainer, \n  FormToggle, \n  TerminalLine,\n  TerminalPrompt,\n  TerminalText,\n  Cursor\n} from './styles';\n\n// Importação centralizada dos componentes\nimport { Logo, Input, PasswordInput, Button } from '../../components';\n\n// Importação dos contextos\nimport { useAuth } from '../../contexts/AuthContext';\nimport { useToast } from '../../contexts/ToastContext';\n\nconst Auth: React.FC = () => {\n  const navigate = useNavigate();\n  const { signIn, signUp } = useAuth();\n  const { showToast } = useToast();\n  \n  const [isLogin, setIsLogin] = useState(true);\n  const [loading, setLoading] = useState(false);\n  \n  // Login form state\n  const [loginEmail, setLoginEmail] = useState('');\n  const [loginPassword, setLoginPassword] = useState('');\n  \n  // Signup form state\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [adminPassword, setAdminPassword] = useState('');\n  \n  // Errors\n  const [passwordError, setPasswordError] = useState('');\n  \n  const validatePassword = () => {\n    if (password.length > 0 && password.length < 6) {\n      setPasswordError('A senha deve ter pelo menos 6 caracteres');\n      return false;\n    } else {\n      setPasswordError('');\n      return true;\n    }\n  };\n  \n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    \n    try {\n      const { error } = await signIn(loginEmail, loginPassword);\n      \n      if (error) {\n        showToast(error.message || 'Erro ao fazer login', 'error');\n      } else {\n        showToast('Login realizado com sucesso!');\n        setTimeout(() => {\n          navigate('/dashboard');\n        }, 1000);\n      }\n    } catch (error) {\n      showToast('Erro ao conectar com o servidor', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const handleSignup = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validatePassword()) return;\n    \n    if (password !== confirmPassword) {\n      showToast('As senhas não coincidem!', 'error');\n      return;\n    }\n    \n    setLoading(true);\n    \n    try {\n      const { error } = await signUp(email, password, username, adminPassword);\n      \n      if (error) {\n        showToast(error.message || 'Erro ao criar conta', 'error');\n      } else {\n        showToast('Conta criada com sucesso!');\n        setIsLogin(true);\n        \n        // Reset form\n        setUsername('');\n        setEmail('');\n        setPassword('');\n        setConfirmPassword('');\n        setAdminPassword('');\n      }\n    } catch (error) {\n      showToast('Erro ao conectar com o servidor', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  return (\n    <Container>\n      <LoginContainer>\n        <Logo />\n        \n        <TerminalLine>\n          <TerminalPrompt>root@valeterm:~$</TerminalPrompt> \n          <TerminalText>{isLogin ? 'iniciar_sessao' : 'novo_usuario'}</TerminalText>\n          <Cursor />\n        </TerminalLine>\n        \n        <FormToggle>\n          <button \n            className={isLogin ? 'active' : ''} \n            onClick={() => setIsLogin(true)}\n          >\n            Login\n          </button>\n          <button \n            className={!isLogin ? 'active' : ''} \n            onClick={() => setIsLogin(false)}\n          >\n            Cadastro\n          </button>\n        </FormToggle>\n        \n        {isLogin ? (\n          <FormContainer onSubmit={handleLogin}>\n            <Input \n              id=\"login-email\" \n              label=\"Email\" \n              type=\"email\" \n              value={loginEmail} \n              onChange={(e) => setLoginEmail(e.target.value)} \n              required \n            />\n            \n            <PasswordInput \n              id=\"login-password\" \n              label=\"Senha\" \n              value={loginPassword} \n              onChange={(e) => setLoginPassword(e.target.value)} \n              required \n            />\n            \n            <Button \n              type=\"submit\" \n              fullWidth \n              isLoading={loading}\n            >\n              Entrar\n            </Button>\n          </FormContainer>\n        ) : (\n          <FormContainer onSubmit={handleSignup}>\n            <Input \n              id=\"username\" \n              label=\"Nome de Usuário\" \n              type=\"text\" \n              value={username} \n              onChange={(e) => setUsername(e.target.value)} \n              required \n            />\n            \n            <Input \n              id=\"email\" \n              label=\"Email\" \n              type=\"email\" \n              value={email} \n              onChange={(e) => setEmail(e.target.value)} \n              required \n            />\n            \n            <PasswordInput \n              id=\"password\" \n              label=\"Senha\" \n              value={password} \n              onChange={(e) => setPassword(e.target.value)} \n              onBlur={() => validatePassword()}\n              error={passwordError}\n              required \n              minLength={6}\n            />\n            \n            <PasswordInput \n              id=\"confirm-password\" \n              label=\"Confirmar Senha\" \n              value={confirmPassword} \n              onChange={(e) => setConfirmPassword(e.target.value)} \n              required \n            />\n            \n            <PasswordInput \n              id=\"admin-password\" \n              label=\"Senha de Autorização\" \n              value={adminPassword} \n              onChange={(e) => setAdminPassword(e.target.value)} \n              required \n            />\n            \n            <Button \n              type=\"submit\" \n              fullWidth \n              isLoading={loading}\n            >\n              Cadastrar\n            </Button>\n          </FormContainer>\n        )}\n      </LoginContainer>\n    </Container>\n  );\n};\n\nexport default Auth;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}